spring.application.name=medcare

api.security.token.secret=my-secret-key
server.port=8081



# ----------------------------------------
# 1. ConfiguraÃ§Ã£o JPA (Hibernate)
# ----------------------------------------

# Gera o esquema do DB automaticamente na inicializaÃ§Ã£o
#spring.jpa.hibernate.ddl-auto=update
#spring.jpa.show-sql=true
#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# ----------------------------------------
# 2. Habilitar o Console Web do H2
# ----------------------------------------

# Habilita o console do H2 para que vocÃª possa ver os dados
#spring.h2.console.enabled=true
# Define o caminho de acesso ao console (ex: http://localhost:8080/h2-console)
#spring.h2.console.path=/h2-console
#spring.datasource.url=jdbc:h2:mem:testeDB
#spring.datasource.driverClassName=org.h2.Driver
#spring.datasource.username=sa
#spring.datasource.password=password

# ----------------------------------------
# 3. Configuração do RabbitMQ
# ----------------------------------------
spring.rabbitmq.addresses=amqps://thdrwxig:IW10e-P7n7u1VtlUIRzS_xKhkEaRyS06@beaver.rmq.cloudamqp.com/thdrwxig

# Habilitar SSL/TLS, obrigatório para conexões remotas na porta 5672
#spring.rabbitmq.ssl.enabled=true

# ----------------------------------------
# 4. Configuração do Spring Cloud Stream
# ----------------------------------------

# Define o nome da função que atua como consumidor (supondo o nome do bean é 'handleRegistration')
spring.cloud.function.definition=handleRegistration

# Define o nome da fila/tópico e o grupo do consumidor (CRÍTICO)
spring.cloud.stream.bindings.handleRegistration-in-0.destination=medic-registration-topic
spring.cloud.stream.bindings.handleRegistration-in-0.group=auth-service-group
spring.cloud.stream.bindings.handleRegistration-in-0.content-type=application/json

# Configuração para reprocessamento de mensagens (resiliência)
spring.cloud.stream.bindings.handleRegistration-in-0.consumer.max-attempts=3

# ----------------------------------------
# 5. Configuração do MySQL (ms_profile)
# ----------------------------------------
spring.datasource.url=jdbc:mysql://localhost:3306/ms_user
spring.datasource.username=root
spring.datasource.password=admin
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Configurações do JPA/Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect


# Loga exceções do listener do RabbitMQ para facilitar a depuração
logging.level.org.springframework.amqp.rabbit.listener=DEBUG
# Loga exceções de binding do Spring Cloud Stream
logging.level.org.springframework.cloud.stream.binder.rabbit.RabbitMessageChannelBinder=DEBUG